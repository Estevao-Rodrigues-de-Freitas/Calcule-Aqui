<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora de Média</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <h2>Calculadora de Média</h2>
    <label for="separador">Separador:</label>
    <input type="text" id="separador" maxlength="1">
    <br>
    <label for="numeros">Números:</label>
    <input type="text" id="numeros" size="40">
    <br>
    <button onclick="calcularMedia()">Calcular Média</button>
    <p id="resultado">Média: </p>
    <pre id="detalhes"></pre>
    <button onclick="copiarResultado()">Copiar Resultado</button>
    <script>
        function calcularMedia() {
            let separador = document.getElementById("separador").value;
            let numerosTexto = document.getElementById("numeros").value;
            
            if (!separador) {
                alert("Defina um separador.");
                return;
            }
            
            try {
                let numeros = numerosTexto.split(separador).map(n => parseFloat(n.trim())).filter(n => !isNaN(n));
                if (numeros.length === 0) throw new Error("Nenhum número válido encontrado.");
                
                let detalhes = "Passo a passo da soma:\n";
                let soma = 0;
                numeros.forEach((num, index) => {
                    if (index === 0) {
                        soma = num;
                        detalhes += `${num}\n`;
                    } else {
                        detalhes += `${soma} + ${num} = ${soma + num}\n`;
                        soma += num;
                    }
                });
                
                detalhes += `\nDivisão detalhada:\n`;
                detalhes += ` ${soma} | ${numeros.length}\n`;
                detalhes += `-${(Math.floor(soma / numeros.length) * numeros.length)} |----\n`;
                detalhes += ` ${soma % numeros.length}`;
                
                let media = soma / numeros.length;
                detalhes += `\n\nResultado final: ${media.toFixed(2)}`;
                
                document.getElementById("resultado").innerText = "Média: " + media.toFixed(2);
                document.getElementById("detalhes").innerText = detalhes;
            } catch (error) {
                alert("Entrada inválida. Certifique-se de usar números válidos e o separador correto.");
            }
        }

        function copiarResultado() {
            let texto = document.getElementById("resultado").innerText.replace("Média: ", "");
            if (texto) {
                navigator.clipboard.writeText(texto).then(() => {
                    alert("Resultado copiado para a área de transferência.");
                }).catch(() => {
                    alert("Erro ao copiar o resultado.");
                });
            } else {
                alert("Nenhum resultado para copiar.");
            }
        }
    </script>
</body>
</html>
